<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>RT-Thread RTOS: 管道</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">RT-Thread RTOS
   &#160;<span id="projectnumber">3.1.0</span>
   </div>
   <div id="projectbrief">An open source embedded real-time operating system</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- 制作者 Doxygen 1.8.10 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>首页</span></a></li>
      <li><a href="modules.html"><span>模块</span></a></li>
      <li><a href="annotated.html"><span>结构体</span></a></li>
      <li><a href="examples.html"><span>示例</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">函数</a>  </div>
  <div class="headertitle">
<div class="title">管道<div class="ingroups"><a class="el" href="group___d_r_i_v_e_r.html">设备管理</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
函数</h2></td></tr>
<tr class="memitem:ga3736cbd3b311405881532c2bf69dc3f9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___basic_def.html#ga42df42aabf676f2a89f5af2208b79950">rt_err_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__pipe.html#ga3736cbd3b311405881532c2bf69dc3f9">rt_pipe_open</a> (<a class="el" href="group___device.html#ga896a5cd63480a02303252f41782379b1">rt_device_t</a> device, <a class="el" href="group___basic_def.html#ga5acba55f46553417996ac70828b874da">rt_uint16_t</a> oflag)</td></tr>
<tr class="memdesc:ga3736cbd3b311405881532c2bf69dc3f9"><td class="mdescLeft">&#160;</td><td class="mdescRight">打开管道  <a href="#ga3736cbd3b311405881532c2bf69dc3f9">更多...</a><br /></td></tr>
<tr class="separator:ga3736cbd3b311405881532c2bf69dc3f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9f7037aaa57fcf9b2b13a75ce562e791"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___basic_def.html#ga42df42aabf676f2a89f5af2208b79950">rt_err_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__pipe.html#ga9f7037aaa57fcf9b2b13a75ce562e791">rt_pipe_close</a> (<a class="el" href="group___device.html#ga896a5cd63480a02303252f41782379b1">rt_device_t</a> device)</td></tr>
<tr class="memdesc:ga9f7037aaa57fcf9b2b13a75ce562e791"><td class="mdescLeft">&#160;</td><td class="mdescRight">关闭管道  <a href="#ga9f7037aaa57fcf9b2b13a75ce562e791">更多...</a><br /></td></tr>
<tr class="separator:ga9f7037aaa57fcf9b2b13a75ce562e791"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaff970951e7bc46aa5fd1d0e7f6c0b6f4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___basic_def.html#ga8011d259fdfc54b8a9aa006b4d49ac14">rt_size_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__pipe.html#gaff970951e7bc46aa5fd1d0e7f6c0b6f4">rt_pipe_read</a> (<a class="el" href="group___device.html#ga896a5cd63480a02303252f41782379b1">rt_device_t</a> device, <a class="el" href="group___basic_def.html#ga0fd4981851ce935649b6723a81f2f1bf">rt_off_t</a> pos, void *buffer, <a class="el" href="group___basic_def.html#ga8011d259fdfc54b8a9aa006b4d49ac14">rt_size_t</a> count)</td></tr>
<tr class="memdesc:gaff970951e7bc46aa5fd1d0e7f6c0b6f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">读管道  <a href="#gaff970951e7bc46aa5fd1d0e7f6c0b6f4">更多...</a><br /></td></tr>
<tr class="separator:gaff970951e7bc46aa5fd1d0e7f6c0b6f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga45d5296cbf5a3135004d2c63b9c835ea"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___basic_def.html#ga8011d259fdfc54b8a9aa006b4d49ac14">rt_size_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__pipe.html#ga45d5296cbf5a3135004d2c63b9c835ea">rt_pipe_write</a> (<a class="el" href="group___device.html#ga896a5cd63480a02303252f41782379b1">rt_device_t</a> device, <a class="el" href="group___basic_def.html#ga0fd4981851ce935649b6723a81f2f1bf">rt_off_t</a> pos, const void *buffer, <a class="el" href="group___basic_def.html#ga8011d259fdfc54b8a9aa006b4d49ac14">rt_size_t</a> count)</td></tr>
<tr class="memdesc:ga45d5296cbf5a3135004d2c63b9c835ea"><td class="mdescLeft">&#160;</td><td class="mdescRight">写管道  <a href="#ga45d5296cbf5a3135004d2c63b9c835ea">更多...</a><br /></td></tr>
<tr class="separator:ga45d5296cbf5a3135004d2c63b9c835ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacfc55982858aad909f0caf1b79f20756"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structrt__pipe__device.html">rt_pipe_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__pipe.html#gacfc55982858aad909f0caf1b79f20756">rt_pipe_create</a> (const char *name, int bufsz)</td></tr>
<tr class="memdesc:gacfc55982858aad909f0caf1b79f20756"><td class="mdescLeft">&#160;</td><td class="mdescRight">创建管道  <a href="#gacfc55982858aad909f0caf1b79f20756">更多...</a><br /></td></tr>
<tr class="separator:gacfc55982858aad909f0caf1b79f20756"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga79f617d873cb0c5f7e1a9284545eb88c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__pipe.html#ga79f617d873cb0c5f7e1a9284545eb88c">rt_pipe_delete</a> (const char *name)</td></tr>
<tr class="memdesc:ga79f617d873cb0c5f7e1a9284545eb88c"><td class="mdescLeft">&#160;</td><td class="mdescRight">删除管道  <a href="#ga79f617d873cb0c5f7e1a9284545eb88c">更多...</a><br /></td></tr>
<tr class="separator:ga79f617d873cb0c5f7e1a9284545eb88c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">详细描述</h2>
<h2 class="groupheader">函数说明</h2>
<a class="anchor" id="ga3736cbd3b311405881532c2bf69dc3f9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___basic_def.html#ga42df42aabf676f2a89f5af2208b79950">rt_err_t</a> rt_pipe_open </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___device.html#ga896a5cd63480a02303252f41782379b1">rt_device_t</a>&#160;</td>
          <td class="paramname"><em>device</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___basic_def.html#ga5acba55f46553417996ac70828b874da">rt_uint16_t</a>&#160;</td>
          <td class="paramname"><em>oflag</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>打开管道 </p>
<p>此函数打开管道，实际创建管道缓冲区。</p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramname">device</td><td>设备控制块 </td></tr>
    <tr><td class="paramname">oflag</td><td>打开方式</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>-RT_EINVAL 设备控制块为空；RT_EOK 打开成功 </dd></dl>

</div>
</div>
<a class="anchor" id="ga9f7037aaa57fcf9b2b13a75ce562e791"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___basic_def.html#ga42df42aabf676f2a89f5af2208b79950">rt_err_t</a> rt_pipe_close </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___device.html#ga896a5cd63480a02303252f41782379b1">rt_device_t</a>&#160;</td>
          <td class="paramname"><em>device</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>关闭管道 </p>
<p>此函数关闭指定管道，销毁其数据缓冲区。</p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramname">device</td><td>设备控制块</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>-RT_EINVAL 设备控制块为空；RT_EOK 关闭成功 </dd></dl>

</div>
</div>
<a class="anchor" id="gaff970951e7bc46aa5fd1d0e7f6c0b6f4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___basic_def.html#ga8011d259fdfc54b8a9aa006b4d49ac14">rt_size_t</a> rt_pipe_read </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___device.html#ga896a5cd63480a02303252f41782379b1">rt_device_t</a>&#160;</td>
          <td class="paramname"><em>device</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___basic_def.html#ga0fd4981851ce935649b6723a81f2f1bf">rt_off_t</a>&#160;</td>
          <td class="paramname"><em>pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___basic_def.html#ga8011d259fdfc54b8a9aa006b4d49ac14">rt_size_t</a>&#160;</td>
          <td class="paramname"><em>count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>读管道 </p>
<p>此函数关闭指定管道，销毁其数据缓冲区。</p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramname">device</td><td>设备控制块 </td></tr>
    <tr><td class="paramname">pos</td><td>与POSIX 标准接口兼容的参数（目前没有意义，传入0即可） </td></tr>
    <tr><td class="paramname">buffer</td><td>读管道数据的存储地址的指针 </td></tr>
    <tr><td class="paramname">count</td><td>待读取数据的大小</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>-RT_EINVAL 设备控制块为空；RT_EOK 关闭成功 </dd></dl>

</div>
</div>
<a class="anchor" id="ga45d5296cbf5a3135004d2c63b9c835ea"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___basic_def.html#ga8011d259fdfc54b8a9aa006b4d49ac14">rt_size_t</a> rt_pipe_write </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___device.html#ga896a5cd63480a02303252f41782379b1">rt_device_t</a>&#160;</td>
          <td class="paramname"><em>device</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___basic_def.html#ga0fd4981851ce935649b6723a81f2f1bf">rt_off_t</a>&#160;</td>
          <td class="paramname"><em>pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___basic_def.html#ga8011d259fdfc54b8a9aa006b4d49ac14">rt_size_t</a>&#160;</td>
          <td class="paramname"><em>count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>写管道 </p>
<p>往管道中写入指定长度数据。</p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramname">device</td><td>设备控制块 </td></tr>
    <tr><td class="paramname">pos</td><td>与POSIX 标准接口兼容的参数（目前没有意义，传入0即可） </td></tr>
    <tr><td class="paramname">buffer</td><td>待写入数据的地址指针 </td></tr>
    <tr><td class="paramname">count</td><td>待写入数据的大小</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>设备控制块为空或待读取数据字节数为0时返回0；写入成功则返回实际写入的字节数 </dd></dl>

</div>
</div>
<a class="anchor" id="gacfc55982858aad909f0caf1b79f20756"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structrt__pipe__device.html">rt_pipe_t</a>* rt_pipe_create </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>bufsz</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>创建管道 </p>
<p>调用该函数创建管道，系统会从动态堆内存中分配一个管道句柄，并对管道句柄按照指定值初始化，然后向系统注册管道设备。</p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>管道名称 </td></tr>
    <tr><td class="paramname">bufsz</td><td>待创建管道的大小</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>创建失败时返回RT_NULL；创建成功则返回管道控制块 </dd></dl>

</div>
</div>
<a class="anchor" id="ga79f617d873cb0c5f7e1a9284545eb88c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rt_pipe_delete </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>删除管道 </p>
<p>调用该函数删除定制名称的管道设备，并释放其所占的内存空间。</p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>管道名称</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>-RT_EBUSY 使用中，删除失败；-ENODEV 为找到设备或设备部位管道类型；0 删除成功 </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
生成于 2018年 十月 25日 星期四 00:39:49 , 为 RT-Thread RTOS使用  &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.10
</small></address>
</body>
</html>
